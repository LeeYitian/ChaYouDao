"use strict";(self["webpackChunkfinal_vue"]=self["webpackChunkfinal_vue"]||[]).push([[882],{2882:function(t,s,e){e.r(s),e.d(s,{default:function(){return Y}});var a=e(3396),r=e(7139);const l={class:"container pb-3"},i={class:"row"},d={class:"col-sm-8 mx-auto"},o={class:"table bg-white text-primary"},n=(0,a._)("caption",{class:"caption-top h3 text-primary fw-bold"}," 訂單資訊 ",-1),c={class:"align-middle"},u=(0,a._)("th",{scope:"row"},"時間",-1),_={class:"align-middle"},p=(0,a._)("th",{scope:"row"},"訂單內容",-1),h={class:"table table-sm table-borderless"},g={width:"100"},m={width:"50",class:"text-end"},w={width:"80",class:"d-none d-sm-table-cell text-end"},b={class:"align-middle"},f=(0,a._)("th",{scope:"row"},"總價",-1),y={colspan:"3",class:"text-end fs-4"},v=(0,a.Uk)(" 付款狀態： "),x={key:0,class:"text-success"},z={key:1,class:"text-danger"},$={class:"table table-borderless table-striped bg-white"},k=(0,a._)("caption",{class:"caption-top h3 text-primary fw-bold"}," 訂購者資訊 ",-1),D=(0,a._)("td",null,"姓名：",-1),L=(0,a._)("td",null,"手機：",-1),C=(0,a._)("td",null,"信箱：",-1),I=(0,a._)("td",null,"收件地址：",-1),P=(0,a._)("td",null,"附註：",-1),O={class:"col-4 ms-auto"};function S(t,s,e,S,H,M){const T=(0,a.up)("loadingComponent");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(T,{active:H.isLoading,loader:"spinner","background-color":"#333"},null,8,["active"]),(0,a._)("div",l,[(0,a._)("div",i,[(0,a._)("div",d,[(0,a._)("table",o,[n,(0,a._)("tbody",null,[(0,a._)("tr",c,[u,(0,a._)("td",null,(0,r.zw)(t.$filters.date(H.create_at)),1)]),(0,a._)("tr",_,[p,(0,a._)("td",null,[(0,a._)("table",h,[(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(H.orderProducts,(s=>((0,a.wg)(),(0,a.iD)("tr",{key:s.id},[(0,a._)("td",g,(0,r.zw)(s.product.title),1),(0,a._)("td",m,(0,r.zw)(s.qty)+" /"+(0,r.zw)(s.product.unit),1),(0,a._)("td",w," $ "+(0,r.zw)(t.$filters.currency(s.final_total)),1)])))),128))])])])]),(0,a._)("tr",b,[f,(0,a._)("td",null,"$ "+(0,r.zw)(t.$filters.currency(H.total)),1)])]),(0,a._)("tfoot",null,[(0,a._)("tr",null,[(0,a._)("td",y,[v,H.is_paid?((0,a.wg)(),(0,a.iD)("span",x,"已付款")):((0,a.wg)(),(0,a.iD)("span",z,"未付款"))])])])]),(0,a._)("table",$,[k,(0,a._)("tbody",null,[(0,a._)("tr",null,[D,(0,a._)("td",null,(0,r.zw)(H.user.name),1)]),(0,a._)("tr",null,[L,(0,a._)("td",null,(0,r.zw)(H.user.tel),1)]),(0,a._)("tr",null,[C,(0,a._)("td",null,(0,r.zw)(H.user.email),1)]),(0,a._)("tr",null,[I,(0,a._)("td",null,(0,r.zw)(H.user.address),1)]),(0,a._)("tr",null,[P,(0,a._)("td",null,(0,r.zw)(H.message),1)])])]),(0,a._)("div",O,[(0,a._)("button",{type:"button",class:"btn btn-success w-100",onClick:s[0]||(s[0]=t=>M.pay(H.orderID))}," 付款 ")])])])])],64)}e(7658);var H={inject:["emitter"],data(){return{isLoading:!1,orderID:"",create_at:"",orderProducts:[],user:{},message:"",is_paid:"",total:0}},methods:{getSingleOrder(t){this.isLoading=!0;const s=`https://vue3-course-api.hexschool.io/api/lyt-api/order/${t}`;this.$http.get(s).then((t=>{if(!t.data.success)return alert(t.data.message),void(this.isLoading=!1);if(!t.data.order)return alert("訂單不存在"),void this.$router.push("/");this.create_at=t.data.order.create_at,this.orderProducts=[];for(const s in t.data.order.products)this.orderProducts.push(t.data.order.products[s]);this.user=t.data.order.user,this.message=t.data.order.message,this.is_paid=t.data.order.is_paid,this.total=t.data.order.total,this.isLoading=!1}))},pay(t){this.isLoading=!0;const s=`https://vue3-course-api.hexschool.io/api/lyt-api/pay/${t}`;this.$http.post(s).then((s=>{if(!s.data.success){const t={state:s.data.success,action:"結帳",msg:s.data.message};return this.emitter.emit("indexToastMsg",t),void(this.isLoading=!1)}const e={state:s.data.success,action:"結帳",msg:s.data.message};this.emitter.emit("indexToastMsg",e),this.getSingleOrder(t)}))}},created(){this.orderID=this.$route.params.id,this.getSingleOrder(this.orderID)}},M=e(89);const T=(0,M.Z)(H,[["render",S]]);var Y=T}}]);
//# sourceMappingURL=882.92543764.js.map