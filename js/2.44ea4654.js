"use strict";(self["webpackChunkfinal_vue"]=self["webpackChunkfinal_vue"]||[]).push([[2],{6719:function(t,e){e["Z"]={data(){return{favorites:[]}},methods:{favorite(t,e){if(e.currentTarget.className.includes("fill")){const a=localStorage.getItem("chaFavorite").split(","),i=a.filter((e=>e!==t));localStorage.setItem("chaFavorite",i.join(",")),e.currentTarget.classList.remove("bi-heart-fill"),e.currentTarget.classList.add("bi-heart")}else{if(localStorage.getItem("chaFavorite")){const e=localStorage.getItem("chaFavorite")+","+t;localStorage.setItem("chaFavorite",e)}else localStorage.setItem("chaFavorite",t);e.currentTarget.classList.remove("bi-heart"),e.currentTarget.classList.add("bi-heart-fill")}},readFavorite(){localStorage.chaFavorite&&(this.favorites=localStorage.chaFavorite.split(","))}},mounted(){this.readFavorite()}}},5002:function(t,e,a){a.r(e),a.d(e,{default:function(){return D}});var i=a(3396),s=a(7139);const r={class:"card bg-transparent border-0"},n=["onClick"],c=["src"],l={class:"card-body d-flex flex-column"},o={class:"card-title h5 text-darkgreen"},d={class:"card-text fw-light related-none"},u={class:"d-flex justify-content-between mt-1"},g={key:0,class:"position-relative related-none"},h={class:"badge rounded-pill text-bg-lightbrown position-absolute bottom-50 start-0 translate-middle-y text-decoration-line-through"},m={class:"text-danger fs-5"},p={key:1,class:"fs-5 text-lightgreen related-none"},f=(0,i.Uk)("詳細介紹"),v=["onClick"],b={key:0,class:"spinner-border spinner-border-sm text-secondary",role:"status"},k=(0,i._)("span",{class:"visually-hidden"},"Loading...",-1),_=[k],w=(0,i.Uk)(" 加入購物車 ");function x(t,e,a,k,x,y){const C=(0,i.up)("router-link");return(0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.selectProducts,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.id,class:(0,s.C_)(["col-lg-4 col-md-6 mb-5 indexProduct-items",{"indexProduct-items-sales":e.price<e.origin_price}])},[(0,i._)("div",r,[(0,i._)("i",{class:(0,s.C_)(["bi",{"bi-heart":!t.favorites.includes(e.id),"bi-heart-fill":t.favorites.includes(e.id)}]),onClick:a=>t.favorite(e.id,a)},null,10,n),(0,i._)("img",{src:e.imageUrl,class:"card-img-top rounded",alt:""},null,8,c),(0,i._)("div",l,[(0,i._)("h2",o,(0,s.zw)(e.title),1),(0,i._)("p",d,(0,s.zw)(y.text(e.description)),1),(0,i._)("div",u,[e.price<e.origin_price?((0,i.wg)(),(0,i.iD)("div",g,[(0,i._)("span",h,"原價$ "+(0,s.zw)(t.$filters.currency(e.origin_price)),1),(0,i._)("span",m,"$ "+(0,s.zw)(t.$filters.currency(e.price)),1)])):((0,i.wg)(),(0,i.iD)("span",p,"$ "+(0,s.zw)(t.$filters.currency(e.origin_price)),1)),(0,i.Wm)(C,{to:`/details/${e.id}`,class:"card-link link-darkgreen stretched-link"},{default:(0,i.w5)((()=>[f])),_:2},1032,["to"])])])]),(0,i._)("button",{class:(0,s.C_)(["btn btn-darkbrown w-100 related-none",{disabled:x.adding&&x.addID===e.id}]),onClick:t=>y.addToCart(e.id)},[x.adding&&x.addID===e.id?((0,i.wg)(),(0,i.iD)("div",b,_)):(0,i.kq)("",!0),w],10,v)],2)))),128)}a(7658);var y=a(6719),C={inject:["emitter"],props:["selectProducts"],mixins:[y.Z],data(){return{adding:!1,addID:""}},methods:{text(t){if(t.length>32){const e=t.split(""),a=e.slice(0,32);return a.push("……"),a.join("")}return t},addToCart(t,e=1){this.adding=!0,this.addID=t;const a="https://vue3-course-api.hexschool.io/api/lyt-api/cart",i={data:{product_id:t,qty:e}};this.$http.post(a,i).then((t=>{if(!t.data.success){const e={state:t.data.success,action:"購物車",msg:t.data.message};return this.emitter.emit("indexToastMsg",e),void(this.adding=!1)}const e={state:t.data.success,action:"加入購物車",msg:t.data.message};this.emitter.emit("indexToastMsg",e),this.emitter.emit("cart"),this.adding=!1}))}}},F=a(89);const I=(0,F.Z)(C,[["render",x]]);var D=I}}]);
//# sourceMappingURL=2.44ea4654.js.map