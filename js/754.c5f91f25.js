(self["webpackChunkfinal_vue"]=self["webpackChunkfinal_vue"]||[]).push([[754],{7317:function(t,e,l){l(7658),
/*!
  * Bootstrap selector-engine.js v5.2.1 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
function(e,i){t.exports=i(l(1437))}(0,(function(t){"use strict";const e={find(t,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,t))},findOne(t,e=document.documentElement){return Element.prototype.querySelector.call(e,t)},children(t,e){return[].concat(...t.children).filter((t=>t.matches(e)))},parents(t,e){const l=[];let i=t.parentNode.closest(e);while(i)l.push(i),i=i.parentNode.closest(e);return l},prev(t,e){let l=t.previousElementSibling;while(l){if(l.matches(e))return[l];l=l.previousElementSibling}return[]},next(t,e){let l=t.nextElementSibling;while(l){if(l.matches(e))return[l];l=l.nextElementSibling}return[]},focusableChildren(e){const l=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((t=>`${t}:not([tabindex^="-"])`)).join(",");return this.find(l,e).filter((e=>!t.isDisabled(e)&&t.isVisible(e)))}};return e}))},981:function(t,e,l){"use strict";l.r(e),l.d(e,{default:function(){return L}});var i=l(3396),a=l(7139);const s={class:"container"},c={class:"table-responsive-lg"},n={class:"table table-hover text-primary mt-2 dashboard-table"},r=(0,i._)("thead",{class:"border-bottom border-light border-2 text-bg-darkgreen"},[(0,i._)("tr",null,[(0,i._)("th",{width:"120",class:"text-center"},"建立時間"),(0,i._)("th",{width:"120",class:"text-center"},"標題"),(0,i._)("th",{width:"80",class:"text-center"},"作者"),(0,i._)("th",{width:"300",class:"text-center"},"摘要"),(0,i._)("th",{width:"80",class:"text-center"},"公開"),(0,i._)("th",{width:"120",class:"text-center"},"編輯")])],-1),o={key:0,class:"text-success"},d={key:1,class:"text-muted"},u={class:"text-center"},h={class:"btn-group"},m=["onClick"],p=["onClick"];function b(t,e,l,b,g,_){const f=(0,i.up)("PaginationBar"),w=(0,i.up)("UpdateArticleModal"),v=(0,i.up)("DeleteModal");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",s,[(0,i._)("button",{class:"btn btn-darkgreen mt-2 btn-sm d-block ms-auto",type:"button",onClick:e[0]||(e[0]=t=>_.adjustAritcle({},t))}," 新增文章 "),(0,i._)("div",c,[(0,i._)("table",n,[r,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(g.articles,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:e.id,class:"align-middle"},[(0,i._)("td",null,(0,a.zw)(t.$filters.date(e.create_at)),1),(0,i._)("td",null,(0,a.zw)(e.title),1),(0,i._)("td",null,(0,a.zw)(e.author),1),(0,i._)("td",null,(0,a.zw)(e.description),1),(0,i._)("td",null,[e.isPublic?((0,i.wg)(),(0,i.iD)("span",o,"公開")):((0,i.wg)(),(0,i.iD)("span",d,"未公開"))]),(0,i._)("td",u,[(0,i._)("div",h,[(0,i._)("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:t=>_.adjustAritcle(e,t)}," 編輯 ",8,m),(0,i._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:t=>_.deleteArticle(e)}," 刪除 ",8,p)])])])))),128))])])])]),(0,i.Wm)(f,(0,a.vs)((0,i.F4)(g.pagination)),null,16),(0,i.Wm)(w,{"temp-info":g.tempArticle,onUpdateArticle:_.update,ref:"updateArticle"},null,8,["temp-info","onUpdateArticle"]),(0,i.Wm)(v,{"temp-info":g.tempArticle,onDeleteInfo:_.erase,ref:"deleteArticle"},null,8,["temp-info","onDeleteInfo"])],64)}var g=l(9242);const _={class:"modal fade modal-xl updateArticle",id:"UpdateOrderModal",tabindex:"-1",ref:"myModal"},f={class:"modal-dialog modal-dialog-scrollable"},w={class:"modal-content border-0"},v={class:"modal-header bg-darkgreen text-white"},y=(0,i._)("h5",{class:"modal-title"},[(0,i._)("span",null,"新增／修改文章")],-1),x={class:"modal-body"},A={class:"row"},k={class:"col-lg-4 mb-3"},$=(0,i._)("label",{for:"articleDate"},"建立日期",-1),D={class:"col-lg-4 mb-3"},M=(0,i._)("label",{for:"articleTitle"},"標題",-1),C={class:"col-lg-4 mb-3"},U=(0,i._)("label",{for:"articleAuthor"},"作者",-1),V={class:"col-lg-6"},E=(0,i._)("label",{class:"form-label",for:"articleImg"},"圖片",-1),j=["src"],I=(0,i._)("label",{for:"articleTag"},"標籤",-1),N={class:"col-lg-6"},P=(0,i._)("label",{for:"articleDescription"},"摘要",-1),S=(0,i._)("label",{for:"articleContent"},"內容",-1),T={class:"mb-3"},z={class:"form-check"},Z=(0,i._)("label",{class:"form-check-label",for:"isPublic"}," 是否公開 ",-1),W={class:"modal-footer"};function Y(t,e,l,a,s,c){return(0,i.wg)(),(0,i.iD)("div",_,[(0,i._)("div",f,[(0,i._)("div",w,[(0,i._)("div",v,[y,(0,i._)("button",{type:"button",class:"btn-close btn-close-white",onClick:e[0]||(e[0]=(...t)=>c.dismiss&&c.dismiss(...t))})]),(0,i._)("div",x,[(0,i._)("div",A,[(0,i._)("div",k,[$,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>s.article.create_at=t),class:"form-control",type:"date",id:"articleDate"},null,512),[[g.nr,s.article.create_at]])]),(0,i._)("div",D,[M,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>s.article.title=t),class:"form-control",type:"text",id:"articleTitle"},null,512),[[g.nr,s.article.title]])]),(0,i._)("div",C,[U,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>s.article.author=t),class:"form-control",type:"text",id:"articleAuthor"},null,512),[[g.nr,s.article.author]])]),(0,i._)("div",V,[E,(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>s.article.image=t),class:"form-control mb-3",type:"url",id:"articleImg",placeholder:"請輸入圖片網址"},null,512),[[g.nr,s.article.image]]),(0,i._)("img",{src:s.article.image,class:"img-fluid",alt:""},null,8,j),I,(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":e[5]||(e[5]=t=>s.article.tag=t),class:"form-control",id:"articleTag",placeholder:"#標籤一、#標籤二......"},null,512),[[g.nr,s.article.tag]])]),(0,i._)("div",N,[P,(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":e[6]||(e[6]=t=>s.article.description=t),class:"form-control mb-3",rows:"10",id:"articleDescription"},null,512),[[g.nr,s.article.description]]),S,(0,i.wy)((0,i._)("textarea",{"onUpdate:modelValue":e[7]||(e[7]=t=>s.article.content=t),class:"form-control mb-3",rows:"10",id:"articleContent"},null,512),[[g.nr,s.article.content]]),(0,i._)("div",T,[(0,i._)("div",z,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":e[8]||(e[8]=t=>s.article.isPublic=t),class:"form-check-input",type:"checkbox",id:"isPublic"},null,512),[[g.e8,s.article.isPublic]]),Z])])])])]),(0,i._)("div",W,[(0,i._)("button",{type:"button",class:"btn btn-outline-secondary",onClick:e[9]||(e[9]=(...t)=>c.dismiss&&c.dismiss(...t))}," 取消 "),(0,i._)("button",{type:"button",class:"btn btn-darkgreen",onClick:e[10]||(e[10]=(...t)=>c.emit&&c.emit(...t))}," 確認 ")])])])],512)}var q=l(1339),F={mixins:[q.Z],props:["tempInfo"],data(){return{article:{}}},watch:{tempInfo(t,e){if(this.article={...t},this.article.tag){const t=this.article.tag.join("、");this.article.tag=t}if(this.article.create_at){const t=new Date(1e3*this.article.create_at),e=t.getFullYear(),l=("0"+(t.getMonth()+1)).slice(-2),i=("0"+t.getDate()).slice(-2);this.article.create_at=`${e}-${l}-${i}`}}},methods:{dismiss(){this.hideModal()},emit(){const t=Math.floor(new Date(this.article.create_at)/1e3);if(this.article.create_at=t,this.article.tag){const t=this.article.tag.split("、");this.article.tag=t}this.$emit("updateArticle",this.article),this.hideModal()}}},H=l(89);const O=(0,H.Z)(F,[["render",Y]]);var B=O,K=l(8660),G={inject:["emitter"],emits:["loading"],data(){return{articles:[],pagination:{},tempArticle:{},isNew:!1}},components:{UpdateArticleModal:B,DeleteModal:K.Z},methods:{getArticle(t=1){this.$emit("loading",!0);const e=`https://vue3-course-api.hexschool.io/api/lyt-api/admin/articles?page=${t}`;this.$http.get(e).then((t=>{this.$emit("loading",!1);const{articles:e,pagination:l}=t.data;this.articles=e,this.pagination=l;const i={...t.data,event:"取得文章列表"};this.emitter.emit("toastMsg",i)})).catch((t=>console.log(t)))},adjustAritcle(t,e){if("編輯"===e.currentTarget.textContent.trim()?this.isNew=!1:this.isNew=!0,t.id){this.$emit("loading",!0);const e=`https://vue3-course-api.hexschool.io/api/lyt-api/admin/article/${t.id}`;this.$http.get(e).then((e=>{this.tempArticle={...t,content:e.data.article.content},this.$emit("loading",!1),this.$refs.updateArticle.showModal()}))}else this.tempArticle=t,this.$refs.updateArticle.showModal()},deleteArticle(t){this.$refs.deleteArticle.showModal(),this.tempArticle=t},update(t){this.$emit("loading",!0);let e="",l={},i="";switch(this.isNew){case!0:e="https://vue3-course-api.hexschool.io/api/lyt-api/admin/article",l={data:{...t}},i="post";break;case!1:e=`https://vue3-course-api.hexschool.io/api/lyt-api/admin/article/${t.id}`,l={data:{...t}},i="put";break}this.$http({url:e,method:i,data:l}).then((t=>{const e={...t.data,event:"新增／修改文章"};this.emitter.emit("toastMsg",e),this.getArticle()})).catch((t=>console.log(t)))},erase(t){this.$emit("loading",!0);const e=`https://vue3-course-api.hexschool.io/api/lyt-api/admin/article/${t.id}`;this.$http.delete(e).then((t=>{const e={...t.data,event:"刪除文章"};this.emitter.emit("toastMsg",e),this.getArticle()})).catch((t=>console.log(t)))}},created(){this.getArticle()}};const J=(0,H.Z)(G,[["render",b]]);var L=J}}]);
//# sourceMappingURL=754.c5f91f25.js.map