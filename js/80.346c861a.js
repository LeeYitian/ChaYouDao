(self["webpackChunkfinal_vue"]=self["webpackChunkfinal_vue"]||[]).push([[80],{434:function(t,e,s){s(7658),s(1703),
/*!
  * Bootstrap collapse.js v5.2.1 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
function(e,n){t.exports=n(s(1437),s(4130),s(7317),s(1884))}(0,(function(t,e,s,n){"use strict";const i=t=>t&&"object"===typeof t&&"default"in t?t:{default:t},o=i(e),a=i(s),l=i(n),r="collapse",c="bs.collapse",d=`.${c}`,u=".data-api",h=`show${d}`,g=`shown${d}`,m=`hide${d}`,p=`hidden${d}`,f=`click${d}${u}`,_="show",v="collapse",b="collapsing",w="collapsed",x=`:scope .${v} .${v}`,y="collapse-horizontal",C="width",k="height",T=".collapse.show, .collapse.collapsing",S='[data-bs-toggle="collapse"]',D={parent:null,toggle:!0},$={parent:"(null|element)",toggle:"boolean"};class L extends l.default{constructor(e,s){super(e,s),this._isTransitioning=!1,this._triggerArray=[];const n=a.default.find(S);for(const i of n){const e=t.getSelectorFromElement(i),s=a.default.find(e).filter((t=>t===this._element));null!==e&&s.length&&this._triggerArray.push(i)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return D}static get DefaultType(){return $}static get NAME(){return r}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(T).filter((t=>t!==this._element)).map((t=>L.getOrCreateInstance(t,{toggle:!1})))),t.length&&t[0]._isTransitioning)return;const e=o.default.trigger(this._element,h);if(e.defaultPrevented)return;for(const o of t)o.hide();const s=this._getDimension();this._element.classList.remove(v),this._element.classList.add(b),this._element.style[s]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const n=()=>{this._isTransitioning=!1,this._element.classList.remove(b),this._element.classList.add(v,_),this._element.style[s]="",o.default.trigger(this._element,g)},i=s[0].toUpperCase()+s.slice(1),a=`scroll${i}`;this._queueCallback(n,this._element,!0),this._element.style[s]=`${this._element[a]}px`}hide(){if(this._isTransitioning||!this._isShown())return;const e=o.default.trigger(this._element,m);if(e.defaultPrevented)return;const s=this._getDimension();this._element.style[s]=`${this._element.getBoundingClientRect()[s]}px`,t.reflow(this._element),this._element.classList.add(b),this._element.classList.remove(v,_);for(const i of this._triggerArray){const e=t.getElementFromSelector(i);e&&!this._isShown(e)&&this._addAriaAndCollapsedClass([i],!1)}this._isTransitioning=!0;const n=()=>{this._isTransitioning=!1,this._element.classList.remove(b),this._element.classList.add(v),o.default.trigger(this._element,p)};this._element.style[s]="",this._queueCallback(n,this._element,!0)}_isShown(t=this._element){return t.classList.contains(_)}_configAfterMerge(e){return e.toggle=Boolean(e.toggle),e.parent=t.getElement(e.parent),e}_getDimension(){return this._element.classList.contains(y)?C:k}_initializeChildren(){if(!this._config.parent)return;const e=this._getFirstLevelChildren(S);for(const s of e){const e=t.getElementFromSelector(s);e&&this._addAriaAndCollapsedClass([s],this._isShown(e))}}_getFirstLevelChildren(t){const e=a.default.find(x,this._config.parent);return a.default.find(t,this._config.parent).filter((t=>!e.includes(t)))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const s of t)s.classList.toggle(w,!e),s.setAttribute("aria-expanded",e)}static jQueryInterface(t){const e={};return"string"===typeof t&&/show|hide/.test(t)&&(e.toggle=!1),this.each((function(){const s=L.getOrCreateInstance(this,e);if("string"===typeof t){if("undefined"===typeof s[t])throw new TypeError(`No method named "${t}"`);s[t]()}}))}}return o.default.on(document,f,S,(function(e){("A"===e.target.tagName||e.delegateTarget&&"A"===e.delegateTarget.tagName)&&e.preventDefault();const s=t.getSelectorFromElement(this),n=a.default.find(s);for(const t of n)L.getOrCreateInstance(t,{toggle:!1}).toggle()})),t.defineJQueryPlugin(L),L}))},3276:function(t,e,s){"use strict";s.d(e,{Z:function(){return o}});s(7658);function n(t){return{all:t=t||new Map,on:function(e,s){var n=t.get(e);n?n.push(s):t.set(e,[s])},off:function(e,s){var n=t.get(e);n&&(s?n.splice(n.indexOf(s)>>>0,1):t.set(e,[]))},emit:function(e,s){var n=t.get(e);n&&n.slice().map((function(t){t(s)})),(n=t.get("*"))&&n.slice().map((function(t){t(e,s)}))}}}const i=n();var o=i},9566:function(t,e,s){"use strict";s.d(e,{Z:function(){return b}});var n=s(3396);const i={class:"toast-container index-toast"};function o(t,e,s,o,a,l){const r=(0,n.up)("IndexToastComponent");return(0,n.wg)(),(0,n.iD)("div",i,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.messages,((t,e)=>((0,n.wg)(),(0,n.j4)(r,{key:e,message:t},null,8,["message"])))),128))])}s(7658);var a=s(7139);const l={class:"d-flex"},r={class:"toast-body"},c=(0,n._)("button",{type:"button",class:"btn-close me-2 m-auto","data-bs-dismiss":"toast"},null,-1);function d(t,e,s,i,o,d){return(0,n.wg)(),(0,n.iD)("div",{class:(0,a.C_)(["toast border-0 w-100",{"text-bg-success":s.message.state,"text-bg-danger":!s.message.state}]),role:"alert",ref:"toast"},[(0,n._)("div",l,[(0,n._)("div",r,(0,a.zw)(`${s.message.action}：${s.message.msg}`),1),c])],2)}var u=s(8803),h=s.n(u),g={props:["message"],mounted(){const t=new(h())(this.$refs.toast,{delay:4e3});t.show()}},m=s(89);const p=(0,m.Z)(g,[["render",d]]);var f=p,_={inject:["emitter"],data(){return{messages:[]}},components:{IndexToastComponent:f},mounted(){this.emitter.on("indexToastMsg",(t=>{this.messages.push({...t})}))}};const v=(0,m.Z)(_,[["render",o]]);var b=v},80:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return _t}});var n=s(3396);const i=(0,n._)("i",{class:"bi bi-chevron-compact-up"},null,-1),o=(0,n._)("div",null,"TOP",-1),a=[i,o];function l(t,e,s,i,o,l){const r=(0,n.up)("IndexNavbar"),c=(0,n.up)("IndexNotificationToast"),d=(0,n.up)("IndexCouponCounter"),u=(0,n.up)("router-view"),h=(0,n.up)("IndexFooter");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(r),(0,n.Wm)(c),(0,n.Wm)(d,{class:"index-coupon-counter"}),(0,n.Wm)(u,{class:"index-view",onClick:l.backdrop},null,8,["onClick"]),(0,n._)("div",{class:"position-fixed bottom-0 end-0 m-2 text-center rounded go-top",onClick:e[0]||(e[0]=(...t)=>l.scrollTop&&l.scrollTop(...t))},a),(0,n.Wm)(h,{class:"index-footer hide-footer"})],64)}var r=s(9242),c=s(7139);const d={class:"navbar-nav flex-column align-items-start h-100"},u=(0,n._)("span",{class:"material-symbols-outlined mb-2"}," temp_preferences_eco ",-1),h=(0,n.Uk)("茶友道 "),g=(0,n._)("i",{class:"ms-2 bi bi-house-door-fill"},null,-1),m=(0,n._)("span",{class:"collapse collapse-horizontal mx-3"},"首頁",-1),p=(0,n._)("i",{class:"ms-2 bi bi-three-dots"},null,-1),f=(0,n._)("span",{class:"collapse collapse-horizontal mx-3"},"商品列表",-1),_=(0,n._)("i",{class:"ms-2 bi bi-tag-fill"},null,-1),v=(0,n._)("span",{class:"collapse collapse-horizontal mx-3"},"特價優惠",-1),b=(0,n._)("i",{class:"ms-2 bi bi-newspaper"},null,-1),w=(0,n._)("span",{class:"collapse collapse-horizontal mx-3"},"茶知識",-1),x=(0,n._)("i",{class:"ms-2 bi bi-heart-fill"},null,-1),y=(0,n._)("span",{class:"collapse collapse-horizontal mx-3"},"我的最愛",-1),C={class:"ms-2 bi bi-cart-fill position-relative"},k={class:"badge text-bg-danger position-absolute top-100 start-100 translate-middle rounded-pill fst-normal",style:{"font-size":"10px"}},T=(0,n._)("span",{class:"collapse collapse-horizontal mx-3"},"購物車",-1),S={class:"offcanvas offcanvas-end bg-altowhite offCanvasNav",tabindex:"-1",id:"indexNavbarOffcanvas"},D=(0,n._)("div",{class:"offcanvas-header"},[(0,n._)("button",{type:"button",class:"btn-close ms-auto","data-bs-dismiss":"offcanvas"})],-1),$={class:"offcanvas-body d-flex flex-column"},L={key:0,class:"text-center"},A=(0,n.Uk)("購物車內無商品"),I=(0,n._)("br",null,null,-1),q=(0,n.Uk)("選購去！"),z={key:1,class:"list-group list-group-flush"},M=["onClick"],N=["onUpdate:modelValue","disabled","onChange"],E={class:"flex-shrink-0"},W={class:"d-flex justify-content-between mt-auto"},O=(0,n.Uk)("建立訂單");function j(t,e,s,i,o,a){const l=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("nav",{class:"navbar navbar-dark bg-primary flex-column justify-content-center px-1 index-nav",onClick:e[1]||(e[1]=(...t)=>a.toggleCollapse&&a.toggleCollapse(...t))},[(0,n._)("div",d,[(0,n.Wm)(l,{to:"/",class:"nav-link link-lightbrown brand mb-3"},{default:(0,n.w5)((()=>[u,h])),_:1}),(0,n.Wm)(l,{to:"/",class:"nav-link"},{default:(0,n.w5)((()=>[g,m])),_:1}),(0,n.Wm)(l,{to:"/product/all",class:"nav-link","data-select":"all",onClick:a.select},{default:(0,n.w5)((()=>[p,f])),_:1},8,["onClick"]),(0,n.Wm)(l,{to:"/product/sales",class:"nav-link","data-select":"sales",onClick:a.select},{default:(0,n.w5)((()=>[_,v])),_:1},8,["onClick"]),(0,n.Wm)(l,{to:"/article/-NDXL9zUAlCX2S0fuInX",class:"nav-link"},{default:(0,n.w5)((()=>[b,w])),_:1}),(0,n.Wm)(l,{to:"/favorite",class:"nav-link"},{default:(0,n.w5)((()=>[x,y])),_:1}),(0,n._)("a",{class:"nav-link mt-auto",role:"button",onClick:e[0]||(e[0]=(0,r.iM)(((...t)=>a.toggleOffcanvas&&a.toggleOffcanvas(...t)),["prevent"]))},[(0,n._)("i",C,[(0,n._)("span",k,(0,c.zw)(o.carts.length),1)]),T])])]),(0,n._)("div",S,[D,(0,n._)("div",$,[0===o.carts.length?((0,n.wg)(),(0,n.iD)("div",L,[A,I,(0,n.Wm)(l,{to:"/product/all",onClick:(0,r.iM)(a.toggleOffcanvas,["prevent"])},{default:(0,n.w5)((()=>[q])),_:1},8,["onClick"])])):(0,n.kq)("",!0),0!==o.carts.length?((0,n.wg)(),(0,n.iD)("ul",z,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.carts,(e=>((0,n.wg)(),(0,n.iD)("li",{key:e.id,class:(0,c.C_)(["list-group-item d-flex align-items-center bg-altowhite text-primary",{"text-muted":o.updating}])},[(0,n._)("i",{class:(0,c.C_)(["me-4 bi bi-x-lg text-danger delete-cart",{"text-muted":o.updating}]),onClick:t=>a.deleteCart(e.id)},null,10,M),(0,n._)("div",{class:(0,c.C_)(["flex-grow-1",{"text-muted":o.updating}])},[(0,n._)("h6",null,(0,c.zw)(e.product.title),1),(0,n._)("div",{class:(0,c.C_)(["d-flex justify-content-between text-darkbrown",{"text-muted":o.updating}])},[(0,n._)("span",null,[(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t=>e.qty=t,type:"number",min:"0",class:"form-control form-control-sm d-inline w-25",disabled:o.updating,onChange:t=>a.updateCart(e.id,e.qty)},null,40,N),[[r.nr,e.qty]]),(0,n.Uk)(" /"+(0,c.zw)(e.product.unit),1)]),(0,n._)("span",E,"$ "+(0,c.zw)(t.$filters.currency(e.final_total)),1)],2)],2)],2)))),128))])):(0,n.kq)("",!0),0!==o.carts.length?((0,n.wg)(),(0,n.iD)("div",{key:2,class:(0,c.C_)(["mt-3 border-top border-3 border-primary p-2 text-end",{"text-muted":o.updating}])}," 小計："+(0,c.zw)(t.$filters.currency(o.final_total))+" 元 ",3)):(0,n.kq)("",!0),(0,n._)("div",W,[(0,n._)("button",{type:"button",class:(0,c.C_)(["btn btn-outline-danger",{disabled:o.updating||0===o.carts.length}]),onClick:e[2]||(e[2]=(...t)=>a.deleteAllCart&&a.deleteAllCart(...t))}," 清空購物車 ",2),(0,n.Wm)(l,{to:"/order",class:(0,c.C_)(["btn btn-primary",{disabled:o.updating||0===o.carts.length}])},{default:(0,n.w5)((()=>[O])),_:1},8,["class"])])])])],64)}var U=s(434),Z=s.n(U),F=s(4032),P=s.n(F),Y={inject:["emitter"],data(){return{collapse:[],offcanvas:{},carts:[],final_total:0,updating:!1}},methods:{createCollapse(){const t=document.querySelectorAll(".collapse"),e=[...t].map((t=>new(Z())(t,{toggle:!1})));this.collapse=e},toggleCollapse(){this.collapse.forEach((t=>t.toggle())),setTimeout((()=>this.hideCollapse()),1e3)},hideCollapse(){this.collapse.forEach((t=>t.hide()))},createOffcanvas(){const t=new(P())(document.querySelector("#indexNavbarOffcanvas"));this.offcanvas=t},toggleOffcanvas(){this.offcanvas.toggle()},select(t){this.emitter.emit("select",t.currentTarget.dataset.select)},getCart(){this.updating=!0;const t="https://vue3-course-api.hexschool.io/api/lyt-api/cart";this.$http.get(t).then((t=>{t.data.success?(this.carts=t.data.data.carts,this.final_total=t.data.data.final_total,this.updating=!1):alert(t.data.message)}))},deleteCart(t){this.updating=!0;const e=`https://vue3-course-api.hexschool.io/api/lyt-api/cart/${t}`;this.$http.delete(e).then((t=>{if(!t.data.success){const e={state:t.data.success,action:"購物車",msg:t.data.message};return this.emitter.emit("indexToastMsg",e),void(this.updating=!1)}const e={state:t.data.success,action:"購物車",msg:t.data.message};this.emitter.emit("indexToastMsg",e),this.getCart()}))},deleteAllCart(){this.updating=!0;const t="https://vue3-course-api.hexschool.io/api/lyt-api/carts";this.$http.delete(t).then((t=>{if(!t.data.success){const e={state:t.data.success,action:"購物車",msg:t.data.message};return this.emitter.emit("indexToastMsg",e),void(this.updating=!1)}const e={state:t.data.success,action:"購物車",msg:t.data.message};this.emitter.emit("indexToastMsg",e),this.offcanvas.hide(),this.getCart()}))},updateCart(t,e){if(this.updating=!0,e<0)return alert("數量不得為負數"),void(this.updating=!1);const s=`https://vue3-course-api.hexschool.io/api/lyt-api/cart/${t}`,n={data:{product_id:t,qty:e}};this.$http.put(s,n).then((t=>{if(!t.data.success){const e={state:t.data.success,action:"購物車",msg:t.data.message};return this.emitter.emit("indexToastMsg",e),void(this.updating=!1)}const e={state:t.data.success,action:"購物車",msg:t.data.message};this.emitter.emit("indexToastMsg",e),this.getCart()}))}},mounted(){this.createCollapse(),this.createOffcanvas(),this.getCart(),this.emitter.on("click",(()=>this.hideCollapse())),this.emitter.on("cart",(()=>this.getCart()))},beforeUnmount(){this.offcanvas.hide()}},H=s(89);const X=(0,H.Z)(Y,[["render",j]]);var B=X;const K={class:"footer-bg bg-altowhite"},Q={class:"container"},V={class:"row"},G={class:"col-sm-6 text-center p-1 mx-auto"},J=(0,n.uE)('<div class="d-flex justify-content-center"><a href="https://github.com/LeeYitian/ChaYouDao" title="此作品Github"><i class="bi bi-github link-secondary fs-4 fw-light"></i></a><a href="mailto:e2004emily@yahoo.com.tw" title="e2004emily@yahoo.com.tw"><i class="mx-3 bi bi-envelope link-secondary fs-4 fw-light"></i></a><a href="https://leeyitian.github.io/PProject/" target="_blank" title="其他作品"><i class="bi bi-window link-secondary fs-4 fw-light"></i></a></div><div class="text-secondary fw-light">個人作品 僅用於展示</div>',2),R=(0,n.Uk)("後台管理");function tt(t,e){const s=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",K,[(0,n._)("div",Q,[(0,n._)("div",V,[(0,n._)("div",G,[J,(0,n.Wm)(s,{to:"/login",target:"_blank",class:"link-secondary fw-light"},{default:(0,n.w5)((()=>[R])),_:1})])])])])}const et={},st=(0,H.Z)(et,[["render",tt]]);var nt=st,it=s(9566);const ot={class:"d-flex align-items-center p-2 bg-warning position-fixed start-0 end-0",ref:"coupounCounter"},at={class:"d-flex flex-column flex-sm-row flex-grow-1 me-2"},lt={class:"text-white fs-4 fw-bold d-inline-block position-relative"},rt=(0,n._)("span",{class:"d-none d-sm-inline"},"永遠的周日慶──",-1),ct={key:0};function dt(t,e,s,i,o,a){return(0,n.wg)(),(0,n.iD)("div",ot,[(0,n._)("div",at,[(0,n._)("div",lt,[rt,"已結束"!==o.counter?((0,n.wg)(),(0,n.iD)("span",ct,"優惠倒數 ")):(0,n.kq)("",!0),(0,n._)("span",null,(0,c.zw)(o.counter),1),(0,n._)("button",{type:"button",class:"position-absolute end-0 d-inline-block d-sm-none btn-close",onClick:e[0]||(e[0]=t=>this.$refs.coupounCounter.style.visibility="hidden")})]),"已結束"===o.counter?((0,n.wg)(),(0,n.iD)("button",{key:0,type:"button",class:"btn btn-sm btn-light ms-2",onClick:e[1]||(e[1]=(...t)=>a.restartCountDown&&a.restartCountDown(...t))}," 重新倒數 ")):(0,n.kq)("",!0),(0,n._)("button",{type:"button",class:(0,c.C_)(["btn btn-outline-light ms-sm-auto",{disabled:"已結束"===o.counter}]),onClick:e[2]||(e[2]=(...t)=>a.getCoupon&&a.getCoupon(...t))}," 領取七折優惠券 ",2)]),(0,n._)("button",{type:"button",class:"d-none d-sm-block btn-close ms-auto",onClick:e[3]||(e[3]=t=>this.$refs.coupounCounter.style.visibility="hidden")})],512)}var ut={inject:["emitter"],data(){return{counter:""}},methods:{countDown(){if(sessionStorage.expired){if(Date.now()>new Date(sessionStorage.expired).getTime())return this.counter="已結束",void(this.$refs.coupounCounter.style.visibility="hidden")}else{const t=new Date(Date.now()+12e4);sessionStorage.setItem("expired",t)}setInterval((()=>{const t=new Date(sessionStorage.expired).getTime()-Date.now();if(t<=0)return void(this.counter="已結束");const e=new Date(t);this.counter=`${("0"+e.getMinutes()).slice(-2)} : ${("0"+e.getSeconds()).slice(-2)}`}),1e3)},restartCountDown(){sessionStorage.removeItem("expired"),this.countDown()},getCoupon(){if(sessionStorage.getItem("coupon")){if(sessionStorage.getItem("coupon").includes("happyday")){const t={state:!1,action:"優惠券",msg:"已經領過了喔"};return void this.emitter.emit("indexToastMsg",t)}const t=sessionStorage.getItem("coupon")+", happyday";sessionStorage.setItem("coupon",t)}else sessionStorage.setItem("coupon","happyday");const t={state:!0,action:"優惠券",msg:"恭喜你獲得優惠券「happyday」"};this.emitter.emit("indexToastMsg",t)}},mounted(){this.countDown()}};const ht=(0,H.Z)(ut,[["render",dt]]);var gt=ht,mt=s(3276),pt={provide(){return{emitter:mt.Z}},emit:["click"],data(){return{preScroll:""}},components:{IndexNavbar:B,IndexFooter:nt,IndexNotificationToast:it.Z,IndexCouponCounter:gt},methods:{backdrop(){mt.Z.emit("click")},hideNavbar(){const t=document.body.scrollTop||document.documentElement.scrollTop;t<this.preScroll?(document.querySelector(".index-nav").classList.remove("hide-nav"),document.querySelector(".index-view").classList.remove("hide-nav-view"),document.querySelector(".index-footer").classList.remove("hide-footer"),document.querySelector(".index-coupon-counter").classList.remove("hide-index-coupon-counter")):(document.querySelector(".index-nav").classList.add("hide-nav"),document.querySelector(".index-view").classList.add("hide-nav-view"),document.querySelector(".index-footer").classList.add("hide-footer"),document.querySelector(".index-coupon-counter").classList.add("hide-index-coupon-counter")),this.preScroll=document.body.scrollTop||document.documentElement.scrollTop},scrollTop(){window.scrollTo({top:0,behavior:"smooth"})}},mounted(){window.addEventListener("scroll",this.hideNavbar)},unmounted(){window.removeEventListener("scroll",this.hideNavbar)}};const ft=(0,H.Z)(pt,[["render",l]]);var _t=ft}}]);
//# sourceMappingURL=80.346c861a.js.map