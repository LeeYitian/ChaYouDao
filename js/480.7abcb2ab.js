"use strict";(self["webpackChunkfinal_vue"]=self["webpackChunkfinal_vue"]||[]).push([[480],{634:function(t,e,a){a.r(e),a.d(e,{default:function(){return ct}});var s=a(3396),l=a(7139),i=a(9242);const c={class:"details-bp min-vh-100"},r={class:"details-main py-3"},o={class:"container"},n={class:"row p-2"},d={style:{"--bs-breadcrumb-divider":"'>'"}},u={class:"breadcrumb"},p={key:1,class:"col-sm-5 col-lg-4"},b=["src"],g={key:0,class:"row g-0 flex-nowrap mt-1"},m={id:"detailsCarousel",class:"carousel slide"},h={class:"carousel-inner"},_={class:"col-4"},y=["src"],v=(0,s.uE)('<button class="carousel-control-prev" type="button" data-bs-target="#detailsCarousel" data-bs-slide="prev"><span class="carousel-control-prev-icon" aria-hidden="true"></span><span class="visually-hidden">Previous</span></button><button class="carousel-control-next" type="button" data-bs-target="#detailsCarousel" data-bs-slide="next"><span class="carousel-control-next-icon" aria-hidden="true"></span><span class="visually-hidden">Next</span></button>',2),k={key:2,class:"col-sm-7 col-lg-6 mt-3 mt-sm-0 d-flex flex-column position-relative text-primary"},w={key:0,class:"d-flex justify-content-between align-items-center"},f={class:"text-decoration-line-through d-none d-sm-inline"},C=(0,s._)("br",null,null,-1),D={class:"text-danger fs-4 fw-semibold"},x={class:"fs-6 text-primary"},U={key:1,class:"fs-5 text-lightgreen fw-semibold related-none"},q={class:"fs-6"},I={class:"row mt-3 mt-lg-auto"},$={class:"col-lg-5"},z={class:"input-group",role:"group"},P={class:"col-lg-5 ms-auto mt-1 mt-lg-0"},E={key:0,class:"spinner-border spinner-border-sm text-secondary",role:"status"},S=(0,s._)("span",{class:"visually-hidden"},"Loading...",-1),T=[S],j=(0,s.Uk)(" 加入購物車 "),M={class:"details-main py-3 mt-4 bg-altowhite"},Z={class:"container w-75"},A={class:"row"},B={class:"nav nav-tabs"},H={class:"d-none d-sm-block nav-item"},K={class:"d-none d-sm-block nav-item"},L={class:"d-none d-sm-block nav-item"},N={class:"d-block d-sm-none nav-item dropdown"},R=(0,s._)("button",{class:"nav-link dropdown-toggle","data-bs-toggle":"dropdown",role:"button"}," 其他說明 ",-1),Y={class:"dropdown-menu"},V={class:"row mt-4 text-primary"},W={key:0},F={key:1},G={class:"row"},J={key:2},O=(0,s._)("ol",null,[(0,s._)("li",null,[(0,s.Uk)(" 企業經營者以通訊交易或訪問交易方式訂立契約時，應將下列資訊以清楚易懂之文句記載於書面，提供消費者："),(0,s._)("br"),(0,s.Uk)(" 一、企業經營者之名稱、代表人、事務所或營業所及電話或電子郵件等消費者得迅速有效聯絡之通訊資料。"),(0,s._)("br"),(0,s.Uk)(" 二、商品或服務之內容、對價、付款期日及方式、交付期日及方式。"),(0,s._)("br"),(0,s.Uk)(" 三、消費者依第十九條規定解除契約之行使期限及方式。"),(0,s._)("br"),(0,s.Uk)(" 四、商品或服務依第十九條第二項規定排除第十九條第一項解除權之適用。"),(0,s._)("br"),(0,s.Uk)(" 五、消費申訴之受理方式。 六、其他中央主管機關公告之事項。 ")]),(0,s._)("li",null," 經由網際網路所為之通訊交易，前項應提供之資訊應以可供消費者完整查閱、儲存之電子方式為之。 "),(0,s._)("li",null," 通訊交易或訪問交易之消費者，得於收受商品或接受服務後七日內，以退回商品或書面通知方式解除契約，無須說明理由及負擔任何費用或對價。但通訊交易有合理例外情事者，不在此限。 ")],-1),Q=[O];function X(t,e,a,S,O,X){const tt=(0,s.up)("router-link"),et=(0,s.up)("PlaceholderComponent"),at=(0,s.up)("IndexProductSelect");return(0,s.wg)(),(0,s.iD)("div",c,[(0,s._)("div",r,[(0,s._)("main",o,[(0,s._)("div",n,[(0,s._)("nav",d,[(0,s._)("ol",u,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(O.breadcrumb,((t,e)=>((0,s.wg)(),(0,s.iD)("li",{key:e,class:(0,l.C_)(["breadcrumb-item",{active:e===O.breadcrumb.length-1}])},[e!==O.breadcrumb.length-1?((0,s.wg)(),(0,s.j4)(tt,{key:0,to:t.path},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(t.page),1)])),_:2},1032,["to"])):(0,s.kq)("",!0),(0,s.Uk)(" "+(0,l.zw)(e===O.breadcrumb.length-1?t.page:null),1)],2)))),128))])]),O.placeholder?((0,s.wg)(),(0,s.j4)(et,{key:0,page:O.placeholderPage},null,8,["page"])):(0,s.kq)("",!0),O.placeholder?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",p,[(0,s._)("img",{src:O.displayUrl||O.product.imageUrl,class:"img-fluid img-thumbnail img-main",alt:"產品圖片"},null,8,b),O.product.imagesUrl?((0,s.wg)(),(0,s.iD)("div",g,[(0,s._)("div",m,[(0,s._)("div",h,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(O.product.imagesUrl,((t,e)=>((0,s.wg)(),(0,s.iD)("div",{key:e,class:(0,l.C_)(["carousel-item",{active:0===e}])},[(0,s._)("div",_,[(0,s._)("img",{src:t,class:"img-fluid img-minor",alt:"產品圖片"},null,8,y)])],2)))),128))]),v])])):(0,s.kq)("",!0)])),O.placeholder?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("article",k,[(0,s._)("i",{class:(0,l.C_)(["bi",{"bi-heart":!t.favorites.includes(O.productID),"bi-heart-fill":t.favorites.includes(O.productID)}]),onClick:e[0]||(e[0]=e=>t.favorite(O.productID,e))},null,2),(0,s._)("h1",null,(0,l.zw)(O.product.title),1),(0,s._)("p",null,(0,l.zw)(O.product.description),1),O.product.price<O.product.origin_price?((0,s.wg)(),(0,s.iD)("div",w,[(0,s._)("span",f,"原價："+(0,l.zw)(t.$filters.currency(O.product.origin_price)),1),C,(0,s._)("span",D,[(0,s.Uk)("特價："+(0,l.zw)(t.$filters.currency(O.product.price))+" 元",1),(0,s._)("span",x," /"+(0,l.zw)(O.product.unit),1)])])):((0,s.wg)(),(0,s.iD)("span",U,[(0,s.Uk)("$ "+(0,l.zw)(t.$filters.currency(O.product.origin_price))+" 元 ",1),(0,s._)("span",q," /"+(0,l.zw)(O.product.unit),1)])),(0,s._)("div",I,[(0,s._)("div",$,[(0,s._)("div",z,[(0,s._)("button",{type:"button",class:"btn btn-darkbrown",onClick:e[1]||(e[1]=t=>0===O.qty?0===O.qty:O.qty--)}," － "),(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>O.qty=t),type:"number",min:"0",class:"form-control"},null,512),[[i.nr,O.qty]]),(0,s._)("button",{type:"button",class:"btn btn-darkbrown",onClick:e[3]||(e[3]=t=>O.qty++)}," ＋ ")])]),(0,s._)("div",P,[(0,s._)("button",{type:"button",class:(0,l.C_)(["btn btn-darkbrown w-100",{disabled:O.adding}]),onClick:e[4]||(e[4]=t=>X.addToCart(O.productID,O.qty))},[O.adding?((0,s.wg)(),(0,s.iD)("div",E,T)):(0,s.kq)("",!0),j],2)])])]))])])]),(0,s._)("div",M,[(0,s._)("section",Z,[(0,s._)("div",A,[(0,s._)("ul",B,[(0,s._)("li",H,[(0,s._)("button",{class:(0,l.C_)(["nav-link",{active:"content"===O.tab}]),onClick:e[5]||(e[5]=t=>O.tab="content")}," 商品說明 ",2)]),(0,s._)("li",K,[(0,s._)("button",{class:(0,l.C_)(["nav-link",{active:"related"===O.tab}]),onClick:e[6]||(e[6]=t=>O.tab="related")}," 相關商品 ",2)]),(0,s._)("li",L,[(0,s._)("button",{class:(0,l.C_)(["nav-link",{active:"policy"===O.tab}]),onClick:e[7]||(e[7]=t=>O.tab="policy")}," 退換貨政策 ",2)]),(0,s._)("li",N,[R,(0,s._)("ul",Y,[(0,s._)("li",null,[(0,s._)("button",{class:(0,l.C_)(["dropdown-item",{active:"content"===O.tab}]),onClick:e[8]||(e[8]=t=>O.tab="content")}," 商品說明 ",2)]),(0,s._)("li",null,[(0,s._)("button",{class:(0,l.C_)(["dropdown-item",{active:"related"===O.tab}]),onClick:e[9]||(e[9]=t=>O.tab="related")}," 相關商品 ",2)]),(0,s._)("li",null,[(0,s._)("button",{class:(0,l.C_)(["dropdown-item",{active:"policy"===O.tab}]),onClick:e[10]||(e[10]=t=>O.tab="policy")}," 退換貨政策 ",2)])])])])]),(0,s._)("div",V,["content"===O.tab?((0,s.wg)(),(0,s.iD)("p",W,(0,l.zw)(O.product.content),1)):"related"===O.tab?((0,s.wg)(),(0,s.iD)("div",F,[(0,s._)("div",G,[(0,s.Wm)(at,{"select-products":O.relatedProduct},null,8,["select-products"])])])):"policy"===O.tab?((0,s.wg)(),(0,s.iD)("div",J,Q)):(0,s.kq)("",!0)])])])])}a(7658);var tt=a(5002),et=a(1085),at=a(6719),st=(a(1957),a(681),{inject:["emitter"],mixins:[at.Z],data(){return{placeholder:!1,placeholderPage:"details",productID:"",displayUrl:"",product:{},categoryMap:{"茶葉":"tea","茶具":"tool","茶點":"desset","包裝":"package"},qty:1,adding:!1,breadcrumb:[{path:"/",page:"首頁"},{path:"/product/all",page:"所有商品"}],relatedProduct:[],tab:"content"}},components:{IndexProductSelect:tt["default"],PlaceholderComponent:et.Z},watch:{productID(t,e){""!==e&&(this.getDetail(t),this.tab="content")}},methods:{getDetail(t){this.placeholder=!0;const e=`https://vue3-course-api.hexschool.io/api/lyt-api/product/${t}`;this.$http.get(e).then((t=>{t.data.success||(alert(t.data.message),this.$router.back()),this.placeholder=!1,this.product=t.data.product})).then((()=>{this.createCarousel(),this.createBreadCrumb(this.product),this.getRelated(this.product.category)}))},getRelated(t){const e="https://vue3-course-api.hexschool.io/api/lyt-api/products/all";this.$http.get(e).then((e=>{e.data.success||(alert(e.data.message),this.$router.back()),this.relatedProduct=e.data.products.filter((e=>e.category===t&&e.id!==this.product.id))}))},createCarousel(){if(!this.product.imagesUrl)return;const t=document.querySelectorAll(".carousel .carousel-item");t.forEach((e=>{e.addEventListener("click",(t=>this.displayImg(t.target.getAttribute("src"))));const a=4;let s=e.nextElementSibling;for(let l=1;l<a;l++){s||(s=t[0]);const a=s.cloneNode(!0);e.appendChild(a.children[0]),s=s.nextElementSibling}}))},createBreadCrumb(t){if(this.breadcrumb=[{path:"/",page:"首頁"},{path:"/product/all",page:"所有商品"}],t.price<t.origin_price){const t={path:"/product/sales",page:"特價優惠"};this.breadcrumb.push(t)}const e=[{path:`/product/${this.categoryMap[t.category]}`,page:t.category},{path:"",page:t.title}];this.breadcrumb.push(...e)},displayImg(t){this.displayUrl=t,setTimeout((()=>this.displayUrl=""),5e3)},addToCart(t,e){this.adding=!0;const a="https://vue3-course-api.hexschool.io/api/lyt-api/cart",s={data:{product_id:t,qty:e}};this.$http.post(a,s).then((t=>{if(!t.data.success){const e={state:t.data.success,action:"購物車",msg:t.data.message};return this.emitter.emit("indexToastMsg",e),void(this.adding=!1)}const e={state:t.data.success,action:"購物車",msg:t.data.message};this.emitter.emit("indexToastMsg",e),this.emitter.emit("cart"),this.adding=!1}))}},created(){this.productID=this.$route.params.id,this.getDetail(this.productID)},updated(){this.productID=this.$route.params.id}}),lt=a(89);const it=(0,lt.Z)(st,[["render",X]]);var ct=it}}]);
//# sourceMappingURL=480.7abcb2ab.js.map