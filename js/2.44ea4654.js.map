{"version":3,"file":"js/2.44ea4654.js","mappings":"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","sources":["webpack://final_vue/./src/mixins/addFavorite.js","webpack://final_vue/./src/views/IndexProductSelect.vue","webpack://final_vue/./src/views/IndexProductSelect.vue?3e0f"],"sourcesContent":["export default {\r\n  data() {\r\n    return {\r\n      favorites: []\r\n    }\r\n  },\r\n  methods: {\r\n    favorite(id, e) {\r\n      if (e.currentTarget.className.includes('fill')) {\r\n        const arr = localStorage.getItem('chaFavorite').split(',')\r\n        const newArr = arr.filter((i) => i !== id)\r\n        localStorage.setItem('chaFavorite', newArr.join(','))\r\n        e.currentTarget.classList.remove('bi-heart-fill')\r\n        e.currentTarget.classList.add('bi-heart')\r\n      } else {\r\n        if (localStorage.getItem('chaFavorite')) {\r\n          const str = localStorage.getItem('chaFavorite') + ',' + id\r\n          localStorage.setItem('chaFavorite', str)\r\n        } else {\r\n          localStorage.setItem('chaFavorite', id)\r\n        }\r\n        e.currentTarget.classList.remove('bi-heart')\r\n        e.currentTarget.classList.add('bi-heart-fill')\r\n      }\r\n    },\r\n    readFavorite() {\r\n      if (localStorage.chaFavorite) {\r\n        this.favorites = localStorage.chaFavorite.split(',')\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.readFavorite()\r\n  }\r\n}\r\n","<template>\r\n  <div\r\n    v-for=\"i in selectProducts\"\r\n    :key=\"i.id\"\r\n    class=\"col-lg-4 col-md-6 mb-5 indexProduct-items\"\r\n    :class=\"{ 'indexProduct-items-sales': i.price < i.origin_price }\"\r\n  >\r\n    <div class=\"card bg-transparent border-0\">\r\n      <i\r\n        class=\"bi\"\r\n        :class=\"{\r\n          'bi-heart': !favorites.includes(i.id),\r\n          'bi-heart-fill': favorites.includes(i.id)\r\n        }\"\r\n        @click=\"favorite(i.id, $event)\"\r\n      ></i>\r\n      <img :src=\"i.imageUrl\" class=\"card-img-top rounded\" alt=\"\" />\r\n      <div class=\"card-body d-flex flex-column\">\r\n        <h2 class=\"card-title h5 text-darkgreen\">{{ i.title }}</h2>\r\n        <p class=\"card-text fw-light related-none\">\r\n          {{ text(i.description) }}\r\n        </p>\r\n        <div class=\"d-flex justify-content-between mt-1\">\r\n          <div\r\n            v-if=\"i.price < i.origin_price\"\r\n            class=\"position-relative related-none\"\r\n          >\r\n            <span\r\n              class=\"badge rounded-pill text-bg-lightbrown position-absolute bottom-50 start-0 translate-middle-y text-decoration-line-through\"\r\n              >原價$ {{ $filters.currency(i.origin_price) }}</span\r\n            >\r\n            <span class=\"text-danger fs-5\"\r\n              >$ {{ $filters.currency(i.price) }}</span\r\n            >\r\n          </div>\r\n          <span v-else class=\"fs-5 text-lightgreen related-none\"\r\n            >$ {{ $filters.currency(i.origin_price) }}</span\r\n          >\r\n          <router-link\r\n            :to=\"`/details/${i.id}`\"\r\n            class=\"card-link link-darkgreen stretched-link\"\r\n            >詳細介紹</router-link\r\n          >\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <button\r\n      class=\"btn btn-darkbrown w-100 related-none\"\r\n      :class=\"{ disabled: adding && addID === i.id }\"\r\n      @click=\"addToCart(i.id)\"\r\n    >\r\n      <div\r\n        v-if=\"adding && addID === i.id\"\r\n        class=\"spinner-border spinner-border-sm text-secondary\"\r\n        role=\"status\"\r\n      >\r\n        <span class=\"visually-hidden\">Loading...</span>\r\n      </div>\r\n      加入購物車\r\n    </button>\r\n  </div>\r\n</template>\r\n\r\n<style>\r\n.indexProduct-items-sales .card {\r\n  position: relative;\r\n}\r\n.indexProduct-items-sales .card::before {\r\n  position: absolute;\r\n  content: '';\r\n  display: block;\r\n  top: 0;\r\n  left: 0;\r\n  background-image: linear-gradient(\r\n    135deg,\r\n    transparent 20%,\r\n    #dc3545 20%,\r\n    #dc3545 50%,\r\n    transparent 50%\r\n  );\r\n  width: 100px;\r\n  height: 100px;\r\n}\r\n.indexProduct-items-sales .card::after {\r\n  position: absolute;\r\n  content: 'SALE';\r\n  top: 15px;\r\n  left: 0px;\r\n  color: white;\r\n  font-size: 1.3rem;\r\n  font-weight: 500;\r\n  letter-spacing: 2px;\r\n  transform: rotate(-45deg);\r\n}\r\n</style>\r\n\r\n<script>\r\nimport addFavorite from '@/mixins/addFavorite.js'\r\n\r\nexport default {\r\n  inject: ['emitter'],\r\n  props: ['selectProducts'],\r\n  mixins: [addFavorite],\r\n  data() {\r\n    return {\r\n      adding: false,\r\n      addID: ''\r\n    }\r\n  },\r\n  methods: {\r\n    text(text) {\r\n      if (text.length > 32) {\r\n        const str = text.split('')\r\n        const subText = str.slice(0, 32)\r\n        subText.push('……')\r\n        return subText.join('')\r\n      } else {\r\n        return text\r\n      }\r\n    },\r\n    addToCart(productID, qty = 1) {\r\n      this.adding = true\r\n      this.addID = productID\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n      const data = {\r\n        data: {\r\n          product_id: productID,\r\n          qty\r\n        }\r\n      }\r\n      this.$http.post(url, data).then((res) => {\r\n        if (!res.data.success) {\r\n          const toastMsg = {\r\n            state: res.data.success,\r\n            action: '購物車',\r\n            msg: res.data.message\r\n          }\r\n          this.emitter.emit('indexToastMsg', toastMsg)\r\n          this.adding = false\r\n          return\r\n        }\r\n        const toastMsg = {\r\n          state: res.data.success,\r\n          action: '加入購物車',\r\n          msg: res.data.message\r\n        }\r\n        this.emitter.emit('indexToastMsg', toastMsg)\r\n        this.emitter.emit('cart')\r\n        this.adding = false\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./IndexProductSelect.vue?vue&type=template&id=0820b1bd\"\nimport script from \"./IndexProductSelect.vue?vue&type=script&lang=js\"\nexport * from \"./IndexProductSelect.vue?vue&type=script&lang=js\"\n\nimport \"./IndexProductSelect.vue?vue&type=style&index=0&id=0820b1bd&lang=css\"\n\nimport exportComponent from \"D:\\\\依恬ㄟ資料夾\\\\六角學院\\\\Vue\\\\final_vue\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["data","favorites","methods","favorite","id","e","currentTarget","className","includes","arr","localStorage","getItem","split","newArr","filter","i","setItem","join","classList","remove","add","str","readFavorite","chaFavorite","this","mounted","class","role","_createElementVNode","_hoisted_15","_createElementBlock","_Fragment","_renderList","$props","key","price","origin_price","_ctx","onClick","$event","src","imageUrl","alt","_toDisplayString","title","$options","description","currency","_createVNode","_component_router_link","to","disabled","$data","_hoisted_16","inject","props","mixins","addFavorite","adding","addID","text","length","subText","slice","push","addToCart","productID","qty","url","product_id","$http","post","then","res","success","toastMsg","state","action","msg","message","emitter","emit","__exports__","render"],"sourceRoot":""}